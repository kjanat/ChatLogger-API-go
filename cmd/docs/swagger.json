{
    "components": {"schemas":{"github_com_kjanat_chatlogger-api-go_internal_domain.APIKey":{"properties":{"created_at":{"type":"string"},"id":{"type":"integer"},"label":{"type":"string"},"organization_id":{"type":"integer"},"revoked_at":{"type":"string"}},"type":"object"},"github_com_kjanat_chatlogger-api-go_internal_domain.Chat":{"properties":{"created_at":{"type":"string"},"id":{"type":"integer"},"messages":{"items":{"$ref":"#/components/schemas/github_com_kjanat_chatlogger-api-go_internal_domain.Message"},"type":"array","uniqueItems":false},"metadata":{"description":"Store ChatMetadata as JSON string","type":"string"},"organization_id":{"type":"integer"},"tags":{"description":"JSON array of tags as string","type":"string"},"title":{"type":"string"},"updated_at":{"type":"string"},"user_id":{"description":"Nullable for anonymous chats","type":"integer"}},"type":"object"},"github_com_kjanat_chatlogger-api-go_internal_domain.ChatMetadata":{"description":"Use the structured type","properties":{"avg_response_time":{"description":"In seconds","type":"number"},"country_code":{"description":"ISO-3166 country code (e.g., \"NL\")","type":"string"},"ip_address":{"type":"string"},"is_escalated":{"type":"boolean"},"is_forwarded_to_hr":{"type":"boolean"},"language_code":{"description":"ISO-639 language code (e.g., \"tr\")","type":"string"},"question_category":{"type":"string"},"sentiment":{"type":"string"},"session_id":{"type":"string"},"token_count":{"description":"Total tokens for the chat session","type":"integer"},"transcript_link":{"type":"string"},"user_rating":{"description":"Optional user rating","type":"integer"}},"type":"object"},"github_com_kjanat_chatlogger-api-go_internal_domain.Export":{"properties":{"completed_at":{"type":"string"},"created_at":{"type":"string"},"error":{"type":"string"},"file_path":{"type":"string"},"format":{"$ref":"#/components/schemas/github_com_kjanat_chatlogger-api-go_internal_domain.ExportFormat"},"id":{"type":"integer"},"organization_id":{"type":"integer"},"status":{"$ref":"#/components/schemas/github_com_kjanat_chatlogger-api-go_internal_domain.ExportStatus"},"type":{"$ref":"#/components/schemas/github_com_kjanat_chatlogger-api-go_internal_domain.ExportType"},"updated_at":{"type":"string"},"user_id":{"type":"integer"}},"type":"object"},"github_com_kjanat_chatlogger-api-go_internal_domain.ExportFormat":{"type":"string","x-enum-varnames":["ExportFormatJSON","ExportFormatCSV"]},"github_com_kjanat_chatlogger-api-go_internal_domain.ExportStatus":{"type":"string","x-enum-varnames":["ExportStatusPending","ExportStatusProcessing","ExportStatusCompleted","ExportStatusFailed"]},"github_com_kjanat_chatlogger-api-go_internal_domain.ExportType":{"type":"string","x-enum-varnames":["ExportTypeChats","ExportTypeMessages","ExportTypeAll"]},"github_com_kjanat_chatlogger-api-go_internal_domain.Message":{"properties":{"chat_id":{"type":"integer"},"content":{"type":"string"},"created_at":{"type":"string"},"id":{"type":"integer"},"metadata":{"description":"Store MessageMetadata as JSON string","type":"string"},"role":{"$ref":"#/components/schemas/github_com_kjanat_chatlogger-api-go_internal_domain.MessageRole"}},"type":"object"},"github_com_kjanat_chatlogger-api-go_internal_domain.MessageMetadata":{"description":"Use structured type","properties":{"response_time":{"description":"In milliseconds","type":"number"},"token_count":{"type":"integer"}},"type":"object"},"github_com_kjanat_chatlogger-api-go_internal_domain.MessageRole":{"type":"string","x-enum-varnames":["MessageRoleUser","MessageRoleAssistant","MessageRoleSystem"]},"github_com_kjanat_chatlogger-api-go_internal_domain.Role":{"type":"string","x-enum-comments":{"RoleAdmin":"Can manage own org","RoleSuperAdmin":"Can manage all orgs","RoleUser":"Regular user","RoleViewer":"Read-only user"},"x-enum-varnames":["RoleSuperAdmin","RoleAdmin","RoleUser","RoleViewer"]},"github_com_kjanat_chatlogger-api-go_internal_domain.User":{"properties":{"created_at":{"type":"string"},"email":{"type":"string"},"first_name":{"type":"string"},"id":{"type":"integer"},"last_login_at":{"type":"string"},"last_name":{"type":"string"},"organization_id":{"type":"integer"},"role":{"type":"string","x-enum-comments":{"RoleAdmin":"Can manage own org","RoleSuperAdmin":"Can manage all orgs","RoleUser":"Regular user","RoleViewer":"Read-only user"},"x-enum-varnames":["RoleSuperAdmin","RoleAdmin","RoleUser","RoleViewer"]},"updated_at":{"type":"string"}},"type":"object"},"internal_handler.ChangePasswordRequest":{"properties":{"current_password":{"type":"string"},"new_password":{"minLength":8,"type":"string"}},"required":["current_password","new_password"],"type":"object"},"internal_handler.CreateChatRequest":{"properties":{"metadata":{"$ref":"#/components/schemas/github_com_kjanat_chatlogger-api-go_internal_domain.ChatMetadata"},"tags":{"items":{"type":"string"},"type":"array","uniqueItems":false},"title":{"type":"string"},"user_id":{"description":"Optional, for anonymous chats","type":"integer"}},"type":"object"},"internal_handler.CreateMessageRequest":{"properties":{"content":{"type":"string"},"metadata":{"$ref":"#/components/schemas/github_com_kjanat_chatlogger-api-go_internal_domain.MessageMetadata"},"role":{"type":"string","x-enum-varnames":["MessageRoleUser","MessageRoleAssistant","MessageRoleSystem"]}},"required":["content","role"],"type":"object"},"internal_handler.ExportRequest":{"properties":{"format":{"enum":["json","csv"],"type":"string"},"type":{"enum":["chats","messages","all"],"type":"string"}},"required":["format","type"],"type":"object"},"internal_handler.GenerateKeyRequest":{"properties":{"label":{"type":"string"}},"required":["label"],"type":"object"},"internal_handler.GetChatResponse":{"properties":{"created_at":{"type":"string"},"id":{"type":"integer"},"messages":{"items":{"$ref":"#/components/schemas/github_com_kjanat_chatlogger-api-go_internal_domain.Message"},"type":"array","uniqueItems":false},"metadata":{"$ref":"#/components/schemas/github_com_kjanat_chatlogger-api-go_internal_domain.ChatMetadata"},"organization_id":{"type":"integer"},"tags":{"description":"Parsed tags","items":{"type":"string"},"type":"array","uniqueItems":false},"title":{"type":"string"},"updated_at":{"type":"string"},"user_id":{"description":"Nullable for anonymous chats","type":"integer"}},"type":"object"},"internal_handler.GetMessageResponse":{"properties":{"chat_id":{"type":"integer"},"content":{"type":"string"},"created_at":{"type":"string"},"id":{"type":"integer"},"metadata":{"$ref":"#/components/schemas/github_com_kjanat_chatlogger-api-go_internal_domain.MessageMetadata"},"role":{"$ref":"#/components/schemas/github_com_kjanat_chatlogger-api-go_internal_domain.MessageRole"}},"type":"object"},"internal_handler.LoginRequest":{"properties":{"email":{"type":"string"},"password":{"type":"string"}},"required":["email","password"],"type":"object"},"internal_handler.RegisterRequest":{"properties":{"email":{"type":"string"},"first_name":{"type":"string"},"last_name":{"type":"string"},"organization_id":{"description":"Made optional, otherwise: `binding:\"required\"`","type":"integer"},"password":{"minLength":8,"type":"string"},"role":{"$ref":"#/components/schemas/github_com_kjanat_chatlogger-api-go_internal_domain.Role"}},"required":["email","password"],"type":"object"},"internal_handler.UpdateChatRequest":{"properties":{"metadata":{"$ref":"#/components/schemas/github_com_kjanat_chatlogger-api-go_internal_domain.ChatMetadata"},"tags":{"items":{"type":"string"},"type":"array","uniqueItems":false},"title":{"type":"string"}},"type":"object"},"internal_handler.UpdateMeRequest":{"properties":{"first_name":{"type":"string"},"last_name":{"type":"string"}},"type":"object"}},"securitySchemes":{"ApiKeyAuth":{"in":"header","name":"x-organization-api-key","type":"apiKey"},"BearerAuth":{"description":"Type \"Bearer\" followed by a space and JWT token.","in":"header","name":"Authorization","type":"apiKey"}}},
    "info": {"contact":{"email":"chatlogger-api-go@kjanat.com","name":"API Support","url":"https://github.com/kjanat/chatlogger-api-go/issues"},"description":"API for logging and managing chat sessions.","license":{"name":"MIT License","url":"https://opensource.org/licenses/MIT"},"termsOfService":"https://no-tos.com","title":"ChatLogger API (Go)","version":""},
    "externalDocs": {"description":"GitHub Wiki","url":"https://github.com/kjanat/chatlogger-api-go/wiki"},
    "paths": {"/api/v1/analytics/messages":{"get":{"description":"Retrieves aggregated statistics about messages within a specified date range for the user's organization.","parameters":[{"description":"Start date (RFC3339 format, e.g., 2023-01-01T00:00:00Z). Defaults to 30 days ago.","in":"query","name":"start","schema":{"type":"string"}},{"description":"End date (RFC3339 format, e.g., 2023-01-31T23:59:59Z). Defaults to now.","in":"query","name":"end","schema":{"type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"additionalProperties":{},"type":"object"}}},"description":"Aggregated message statistics"},"400":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Invalid date format"},"401":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Unauthorized (JWT invalid/missing or Org ID not found)"},"500":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Failed to get message statistics"}},"security":[{"BearerAuth":[]}],"summary":"Get Message Statistics","tags":["Analytics"]}},"/api/v1/chats":{"get":{"description":"Retrieves a paginated list of chat sessions for the user's organization.","parameters":[{"description":"Number of chats per page","in":"query","name":"limit","schema":{"default":20,"type":"integer"}},{"description":"Offset for pagination","in":"query","name":"offset","schema":{"default":0,"type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/github_com_kjanat_chatlogger-api-go_internal_domain.Chat"},"type":"array"}}},"description":"List of chats"},"401":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Unauthorized (JWT invalid/missing or Org ID not found)"},"500":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Failed to list chats"}},"security":[{"BearerAuth":[]}],"summary":"List Chats","tags":["Chats"]},"post":{"description":"Creates a new chat session for the organization. Can be called via Dashboard (JWT) or Public API (API Key).","parameters":[{"description":"Organization Slug (Required for Public API)","in":"path","name":"slug","schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/internal_handler.CreateChatRequest"}}},"description":"Chat Details","required":true},"responses":{"201":{"content":{"application/json":{"schema":{"additionalProperties":{},"type":"object"}}},"description":"message: Chat created successfully, chat_id: uint64"},"400":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Invalid request data"},"401":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Unauthorized (JWT or API Key invalid/missing, or Org ID not found)"},"403":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Forbidden (API Key doesn't match slug)"},"500":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Failed to create chat or process tags/metadata"}},"security":[{"ApiKeyAuth":[],"BearerAuth":[]}],"summary":"Create Chat","tags":["Chats"]}},"/api/v1/chats/{chatID}":{"delete":{"description":"Deletes a chat session and its associated messages.","parameters":[{"description":"Chat ID","in":"path","name":"chatID","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Chat deleted successfully"},"400":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Invalid chat ID"},"401":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Unauthorized (JWT invalid/missing or Org ID not found)"},"403":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Permission denied (Chat doesn't belong to user's org)"},"404":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Chat not found"},"500":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Failed to get or delete chat"}},"security":[{"BearerAuth":[]}],"summary":"Delete Chat","tags":["Chats"]},"get":{"description":"Retrieves details for a specific chat session, optionally including messages.","parameters":[{"description":"Chat ID","in":"path","name":"chatID","required":true,"schema":{"type":"integer"}},{"description":"Include messages in the response","in":"query","name":"include_messages","schema":{"default":false,"type":"boolean"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/internal_handler.GetChatResponse"}}},"description":"Chat details"},"400":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Invalid chat ID"},"401":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Unauthorized (JWT invalid/missing or Org ID not found)"},"403":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Permission denied (Chat doesn't belong to user's org)"},"404":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Chat not found"},"500":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Failed to get chat or messages"}},"security":[{"BearerAuth":[]}],"summary":"Get Chat by ID","tags":["Chats"]},"patch":{"description":"Updates the title, tags, or metadata of an existing chat session.","parameters":[{"description":"Chat ID","in":"path","name":"chatID","required":true,"schema":{"type":"integer"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/internal_handler.UpdateChatRequest"}}},"description":"Fields to update","required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/internal_handler.GetChatResponse"}}},"description":"Updated chat details"},"400":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Invalid chat ID or request data"},"401":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Unauthorized (JWT invalid/missing or Org ID not found)"},"403":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Permission denied (Chat doesn't belong to user's org)"},"404":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Chat not found"},"500":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Failed to get or update chat, or process tags/metadata"}},"security":[{"BearerAuth":[]}],"summary":"Update Chat","tags":["Chats"]}},"/api/v1/chats/{chatID}/messages":{"get":{"description":"Retrieves all messages associated with a specific chat session.","parameters":[{"description":"Chat ID","in":"path","name":"chatID","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/internal_handler.GetMessageResponse"},"type":"array"}}},"description":"List of messages with parsed metadata"},"400":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Invalid chat ID"},"401":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Unauthorized (JWT invalid/missing or Org ID not found)"},"403":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Permission denied (Chat doesn't belong to user's org)"},"404":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Chat not found"},"500":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Failed to get chat or messages"}},"security":[{"BearerAuth":[]}],"summary":"Get Chat Messages","tags":["Messages"]}},"/api/v1/exports":{"get":{"description":"Retrieves a paginated list of asynchronous export jobs for the user's organization.","parameters":[{"description":"Number of exports per page","in":"query","name":"limit","schema":{"default":10,"type":"integer"}},{"description":"Offset for pagination","in":"query","name":"offset","schema":{"default":0,"type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/github_com_kjanat_chatlogger-api-go_internal_domain.Export"},"type":"array"}}},"description":"List of export jobs"},"401":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Unauthorized (JWT invalid/missing or Org ID not found)"},"500":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Failed to fetch exports"}},"security":[{"BearerAuth":[]}],"summary":"List Export Jobs","tags":["Exports"]},"post":{"description":"Initiates an asynchronous job to export chat data (chats, messages, or all) in JSON or CSV format for the user's organization.","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/internal_handler.ExportRequest"}}},"description":"Export parameters (format, type)","required":true},"responses":{"202":{"content":{"application/json":{"schema":{"additionalProperties":{},"type":"object"}}},"description":"export_id: uint64, status: domain.ExportStatus, message: string"},"400":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Invalid request data (format/type)"},"401":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Unauthorized (JWT invalid/missing, Org or User ID not found)"},"500":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Failed to create export job"}},"security":[{"BearerAuth":[]}],"summary":"Create Asynchronous Export Job","tags":["Exports"]}},"/api/v1/exports/sync":{"post":{"description":"Immediately generates and returns an export file (JSON or CSV) containing chat data. Use async export for large datasets.","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/internal_handler.ExportRequest"}}},"description":"Export parameters (format, type)","required":true},"responses":{"200":{"content":{"application/json":{"schema":{"type":"file"}},"application/octet-stream":{"schema":{"format":"binary","type":"string"}}},"description":"Export file (JSON or CSV)"},"400":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Invalid request data (format/type)"},"401":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Unauthorized (JWT invalid/missing or Org ID not found)"},"500":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Failed to retrieve data or generate export"}},"security":[{"BearerAuth":[]}],"summary":"Create Synchronous Export (Legacy)","tags":["Exports (Legacy)"]}},"/api/v1/exports/{id}":{"get":{"description":"Retrieves the status and details of a specific asynchronous export job.","parameters":[{"description":"Export Job ID","in":"path","name":"id","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_kjanat_chatlogger-api-go_internal_domain.Export"}}},"description":"Export job details"},"400":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Invalid export ID"},"401":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Unauthorized (JWT invalid/missing or Org ID not found)"},"404":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Export not found or doesn't belong to user's org"}},"security":[{"BearerAuth":[]}],"summary":"Get Export Job Status","tags":["Exports"]}},"/api/v1/exports/{id}/download":{"get":{"description":"Downloads the file generated by a completed asynchronous export job.","parameters":[{"description":"Export Job ID","in":"path","name":"id","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"type":"file"}},"application/octet-stream":{"schema":{"format":"binary","type":"string"}}},"description":"Export file (JSON or CSV)"},"400":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Invalid export ID or export not ready"},"401":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Unauthorized (JWT invalid/missing or Org ID not found)"},"404":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Export not found or doesn't belong to user's org"},"500":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Export file path not found or file missing on disk"}},"security":[{"BearerAuth":[]}],"summary":"Download Export File","tags":["Exports"]}},"/api/v1/orgs/me/apikeys":{"get":{"description":"Lists all API keys for the organization associated with the authenticated user.","responses":{"200":{"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/github_com_kjanat_chatlogger-api-go_internal_domain.APIKey"},"type":"array"}}},"description":"OK"},"401":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Unauthorized or Org ID not found"},"500":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Failed to list API keys"}},"security":[{"BearerAuth":[]}],"summary":"List API Keys","tags":["API Keys (Admin)"]},"post":{"description":"Generates a new API key for the organization associated with the authenticated user.","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/internal_handler.GenerateKeyRequest"}}},"description":"API Key Label","required":true},"responses":{"201":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"API key generated successfully"},"400":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Invalid request data"},"401":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Unauthorized or Org ID not found"},"500":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Failed to generate API key"}},"security":[{"BearerAuth":[]}],"summary":"Generate API Key","tags":["API Keys (Admin)"]}},"/api/v1/orgs/me/apikeys/{id}":{"delete":{"description":"Revokes an existing API key by its ID.","parameters":[{"description":"API Key ID","in":"path","name":"id","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"API key revoked successfully"},"400":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Invalid API key ID"},"401":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Unauthorized or Org ID not found"},"403":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Permission denied"},"404":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"API key not found"},"500":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Failed to revoke API key"}},"security":[{"BearerAuth":[]}],"summary":"Revoke API Key","tags":["API Keys (Admin)"]}},"/api/v1/orgs/me/apikeys/{id}/delete":{"delete":{"description":"Deletes an API key permanently. Use RevokeKey for standard deactivation.","parameters":[{"description":"API Key ID","in":"path","name":"id","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"API key deleted successfully"},"400":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Invalid API key ID"},"401":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Unauthorized or Org ID not found"},"403":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Permission denied"},"404":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"API key not found"},"500":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Failed to delete API key"}},"security":[{"BearerAuth":[]}],"summary":"Delete API Key (Not typically exposed, Revoke is preferred)","tags":["API Keys (Admin)"]}},"/api/v1/orgs/me/users":{"get":{"description":"Retrieves a paginated list of all users belonging to the authenticated user's organization. Requires admin role.","parameters":[{"description":"Number of users per page","in":"query","name":"limit","schema":{"default":20,"type":"integer"}},{"description":"Offset for pagination","in":"query","name":"offset","schema":{"default":0,"type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/github_com_kjanat_chatlogger-api-go_internal_domain.User"},"type":"array"}}},"description":"List of users in the organization"},"401":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Unauthorized (JWT invalid/missing or Org ID not found)"},"403":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Forbidden (User does not have admin role)\"\t//\tAssuming\tRoleRequired\tmiddleware\thandles\tthis"},"500":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Failed to get users"}},"security":[{"BearerAuth":[]}],"summary":"List Organization Users (Admin)","tags":["Users (Admin)"]}},"/api/v1/orgs/{slug}/chats":{"post":{"description":"Creates a new chat session for the organization. Can be called via Dashboard (JWT) or Public API (API Key).","parameters":[{"description":"Organization Slug (Required for Public API)","in":"path","name":"slug","schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/internal_handler.CreateChatRequest"}}},"description":"Chat Details","required":true},"responses":{"201":{"content":{"application/json":{"schema":{"additionalProperties":{},"type":"object"}}},"description":"message: Chat created successfully, chat_id: uint64"},"400":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Invalid request data"},"401":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Unauthorized (JWT or API Key invalid/missing, or Org ID not found)"},"403":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Forbidden (API Key doesn't match slug)"},"500":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Failed to create chat or process tags/metadata"}},"security":[{"ApiKeyAuth":[],"BearerAuth":[]}],"summary":"Create Chat","tags":["Chats"]}},"/api/v1/orgs/{slug}/chats/{chatID}/messages":{"post":{"description":"Adds a new message to an existing chat session. Can be called via Public API (API Key).","parameters":[{"description":"Organization Slug","in":"path","name":"slug","required":true,"schema":{"type":"string"}},{"description":"Chat ID","in":"path","name":"chatID","required":true,"schema":{"type":"integer"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/internal_handler.CreateMessageRequest"}}},"description":"Message Details (role, content, metadata)","required":true},"responses":{"201":{"content":{"application/json":{"schema":{"additionalProperties":{},"type":"object"}}},"description":"message: Message created successfully, message_id: uint64"},"400":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Invalid chat ID or request data (role, content, metadata validation)"},"401":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Unauthorized (API Key invalid/missing or Org ID not found)"},"403":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Forbidden (API Key doesn't match slug or chat doesn't belong to org)"},"404":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Chat not found"},"500":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Failed to get chat or create message"}},"security":[{"ApiKeyAuth":[]}],"summary":"Create Message","tags":["Messages"]}},"/api/v1/users/me":{"get":{"description":"Retrieves the profile information for the currently authenticated user.","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_kjanat_chatlogger-api-go_internal_domain.User"}}},"description":"Current user's profile"},"401":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Unauthorized (JWT invalid/missing or User ID not found)"},"404":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"User not found"},"500":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Failed to get user"}},"security":[{"BearerAuth":[]}],"summary":"Get Current User","tags":["Users"]},"patch":{"description":"Updates the first name and last name for the currently authenticated user.","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/internal_handler.UpdateMeRequest"}}},"description":"User fields to update","required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/github_com_kjanat_chatlogger-api-go_internal_domain.User"}}},"description":"Updated user profile"},"400":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Invalid request data"},"401":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Unauthorized (JWT invalid/missing or User ID not found)"},"404":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"User not found"},"500":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Failed to get or update user"}},"security":[{"BearerAuth":[]}],"summary":"Update Current User","tags":["Users"]}},"/api/v1/users/me/password":{"post":{"description":"Allows the currently authenticated user to change their password.","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/internal_handler.ChangePasswordRequest"}}},"description":"Current and new password","required":true},"responses":{"200":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Password changed successfully"},"400":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Invalid request data or password change failed (e.g., wrong current password)"},"401":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Unauthorized (JWT invalid/missing or User ID not found)"}},"security":[{"BearerAuth":[]}],"summary":"Change Password","tags":["Users"]}},"/auth/login":{"post":{"description":"Authenticates a user with email and password, returns user info and sets an HTTP-only auth cookie.","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/internal_handler.LoginRequest"}}},"description":"Login Credentials","required":true},"responses":{"200":{"content":{"application/json":{"schema":{"additionalProperties":{},"type":"object"}}},"description":"message: Login successful, user: domain.User"},"400":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Invalid request data"},"401":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Invalid email or password"}},"summary":"User Login","tags":["Authentication"]}},"/auth/logout":{"post":{"description":"Logs out the current user by clearing the authentication cookie.","responses":{"200":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Logout successful"}},"summary":"User Logout","tags":["Authentication"]}},"/auth/register":{"post":{"description":"Registers a new user. In a real app, this might require admin privileges or an invitation system.","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/internal_handler.RegisterRequest"}}},"description":"User Registration Details","required":true},"responses":{"201":{"content":{"application/json":{"schema":{"additionalProperties":{},"type":"object"}}},"description":"message: User registered successfully, user_id: uint64"},"400":{"content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object"}}},"description":"Invalid request data or registration failed (e.g., email exists)"}},"summary":"User Registration","tags":["Authentication"]}}},
    "openapi": "3.1.0"
}